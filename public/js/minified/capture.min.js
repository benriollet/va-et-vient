function init(){function t(t){switch(console.log(String.fromCharCode(t.which)),String.fromCharCode(t.which)){case" ":t.preventDefault(),sendCapture()}}function e(){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.getUserMedia&&window.URL){var t=document.getElementById("my_camera");navigator.getUserMedia({audio:!1,video:{mandatory:{minWidth:c,minHeight:c}}},function(e){t.src=window.URL.createObjectURL(e)||e},function(t){console.log("The following error occured: "+t)})}else alert("getUserMedia not supported on your machine!")}function o(t){t.column==app.column&&($("#notes table").append('<tr><td><p class="counter"></p></td><td><p>'+t.text+"</p></td></tr>"),$("#notes table tr:last-child p").attr(t))}function n(t){$("#capture .result").removeClass("show");var e=document.getElementById("my_camera"),o=document.createElement("canvas");o.width=d,o.height=c;var n=o.getContext("2d");n.drawImage(e,0,0,d,c);var a=o.toDataURL("image/jpeg",1),i={imgBase64:a,session:app.session,column:app.column,note:{time:$(m).attr("time"),text:$(m).attr("text"),path:$(m).attr("path")}};$(m).length>0&&r.emit("capture",i),$("#capture .result").html('<img src="'+a+'">'),$("#capture .result").addClass("show")}function a(t){var e={session:app.session,column:$(m).attr("column"),time:$(m).attr("time"),text:$(m).attr("text"),done:!0};console.log(e),r.emit("updateNote",e),$("#notes table tr:first-child").animate({opacity:0},500,function(){$(this).remove()})}var i=document.domain,r=io.connect(i),s="",c=1080,d=1920,m="#notes table tr:first-child td:last-child p";$(document).on("keypress",t),r.on("newNote",o),$("#Snapshot").on("click",n),$("#nextNote").on("click",a),e()}$(document).on("ready",init);