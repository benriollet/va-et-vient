function init(){function t(t){switch(console.log(String.fromCharCode(t.which)),String.fromCharCode(t.which)){case" ":t.preventDefault(),sendCapture()}}function e(){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.getUserMedia&&window.URL){var t=document.getElementById("my_camera");navigator.getUserMedia({audio:!1,video:{mandatory:{minWidth:c,minHeight:c}}},function(e){t.src=window.URL.createObjectURL(e)||e},function(t){console.log("The following error occured: "+t)})}else alert("getUserMedia not supported on your machine!")}function i(t){t.column==app.column&&($("#notes").append("<li>"+t.text+"</li>"),$("#notes li:last-child").attr(t))}function n(t){$("#capture .result").removeClass("show");var e=document.getElementById("my_camera"),i=document.createElement("canvas");i.width=d,i.height=c;var n=i.getContext("2d");n.drawImage(e,0,0,d,c);var o=i.toDataURL("image/jpeg",1),a={imgBase64:o,session:app.session,column:app.column,note:{time:$("#notes li:first-child").attr("time"),text:$("#notes li:first-child").attr("text"),path:$("#notes li:first-child").attr("path")}};$("#notes li:first-child").length>0&&r.emit("capture",a),$("#capture .result").html('<img src="'+o+'">'),$("#capture .result").addClass("show")}function o(t){var e={session:app.session,column:$("#notes li:first-child").attr("column"),time:$("#notes li:first-child").attr("time"),text:$("#notes li:first-child").attr("text"),done:!0};r.emit("updateNote",e),$("#notes table tr:first-child").animate({opacity:0},500,function(){$(this).remove()})}var a=document.domain,r=io.connect(a),s="",c=1080,d=1920;$(document).on("keypress",t),r.on("newNote",i),$("#Snapshot").on("click",n),$("#nextNote").on("click",o),e()}$(document).on("ready",init);